<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°Feliz Cumplea√±os Malena!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff7f50, #ffd700);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 600px;
            width: 90%;
            margin-bottom: 20px;
        }

        h1 {
            color: #ff7f50;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .message {
            background: #fff9c4;
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .photo {
            width: 100%;
            height: 180px;
            background: #f0f0f0;
            border-radius: 10px;
            border: 3px solid #ffd700;
            object-fit: cover;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .photo:hover {
            transform: scale(1.05);
        }

        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            animation: fall linear forwards;
            pointer-events: none;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        .heart {
            position: fixed;
            font-size: 20px;
            color: #ff7f50;
            animation: float 3s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .celebration-btn {
            background: linear-gradient(135deg, #ff7f50, #ffd700);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .celebration-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 127, 80, 0.4);
        }

        .music-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .music-status {
            margin-top: 10px;
            color: #ff7f50;
            font-weight: bold;
        }

        /* Part√≠culas especiales */
        .special-particle {
            position: fixed;
            animation: specialFall linear forwards;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes specialFall {
            to {
                transform: translateY(100vh) rotate(360deg) scale(0.5);
            }
        }
        
        /* Lightbox para fotos */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .lightbox-img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(255, 127, 80, 0.5);
            animation: zoomIn 0.3s ease;
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.7);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
            z-index: 2001;
        }

        .lightbox-close:hover {
            color: #ff7f50;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            transform: translateY(-50%);
            z-index: 2001;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(255, 127, 80, 0.8);
            transform: scale(1.1);
        }

        /* Sello personal */
        .creator-stamp {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 30px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
            border: 2px solid #ffd700;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .creator-photo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #ff7f50;
            box-shadow: 0 0 10px rgba(255, 127, 80, 0.3);
        }

        .creator-text {
            color: #ff7f50;
            font-style: italic;
            font-weight: bold;
            font-size: 1em;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÇ ¬°Feliz Cumplea√±os Malena! üéÇ</h1>
        
        <!-- Indicador de m√∫sica -->
        <div class="music-status" id="musicStatus">
            üéµ Reproduciendo Cumplea√±os Feliz...
        </div>
        
        <div class="message">
            <p><strong>Querida Ensaladita de Mango</strong></p>
            <br>
            <p>Hoy celebro el d√≠a en el que el mundo se volvi√≥ m√°s bonito, porque t√∫ llegastes a √©l.</p>
            <p>No hay palabras suficientes para agradecer que est√©s en mi vida, que me regales tu sonrisa, tu ternura y esa forma √∫nica de hacer que todo sea mejor</p>
            <br>
            <p>Feliz 20 a√±os a la persona que logr√≥ que un ni√±o pera como yo aprenda a amar y a ver el gris en las cosas.</p>
            <br>
            <p>Gracias por ser t√∫. Por ser tan incre√≠ble. Por hacerme sentir tan afortunado.</p>
            <br>
            <p>Te amo con todo mi coraz√≥nüíñ</p>
        </div>

        <div class="photo-gallery">
            <img src="foto1.jpg" alt="Nuestra foto 1" class="photo" onerror="this.style.display='none'" onclick="openLightbox(0)">
            <img src="foto2.jpg" alt="Nuestra foto 2" class="photo" onerror="this.style.display='none'" onclick="openLightbox(1)">
            <img src="foto3.jpg" alt="Nuestra foto 3" class="photo" onerror="this.style.display='none'" onclick="openLightbox(2)">
            <img src="foto4.jpg" alt="Nuestra foto 4" class="photo" onerror="this.style.display='none'" onclick="openLightbox(3)">
        </div>

        <div class="music-controls">
            <button onclick="playHappyBirthday()" class="celebration-btn">
                ‚ñ∂Ô∏è Reproducir
            </button>
            
            <button onclick="pauseMusic()" class="celebration-btn">
                ‚è∏Ô∏è Pausar
            </button>
            
            <button onclick="stopMusic()" class="celebration-btn">
                ‚èπÔ∏è Parar
            </button>
            
            <button onclick="celebrate()" class="celebration-btn">
                üéâ M√°s Celebraci√≥n
            </button>
        </div>

        <!-- Sello personal -->
        <div class="creator-stamp">
            <img src="foto5.jpg" alt="Tu ni√±o pera favorito" class="creator-photo" onerror="this.style.display='none'">
            <div class="creator-text">Creado con Amor de tu ni√±o pera favorito</div>
        </div>
    </div>

    <!-- Lightbox para fotos -->
    <div id="lightbox" class="lightbox">
        <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
        <div class="lightbox-nav">
            <button class="nav-btn" onclick="changePhoto(-1)">&#10094;</button>
            <button class="nav-btn" onclick="changePhoto(1)">&#10095;</button>
        </div>
        <img id="lightbox-img" class="lightbox-img" src="" alt="Foto ampliada">
    </div>

    <script>
        // Variable global para controlar el audio
        let birthdayAudio = null;
        let isPlaying = false;

        // Variables para el lightbox
        let currentPhotoIndex = 0;
        const photos = ['foto1.jpg', 'foto2.jpg', 'foto3.jpg', 'foto4.jpg'];

        // Funciones para el lightbox
        function openLightbox(index) {
            currentPhotoIndex = index;
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            
            lightboxImg.src = photos[currentPhotoIndex];
            lightbox.style.display = 'flex';
            
            // Deshabilitar scroll del body
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.style.display = 'none';
            
            // Habilitar scroll del body
            document.body.style.overflow = 'auto';
        }

        function changePhoto(direction) {
            currentPhotoIndex += direction;
            
            // Circular navigation
            if (currentPhotoIndex >= photos.length) {
                currentPhotoIndex = 0;
            } else if (currentPhotoIndex < 0) {
                currentPhotoIndex = photos.length - 1;
            }
            
            const lightboxImg = document.getElementById('lightbox-img');
            lightboxImg.src = photos[currentPhotoIndex];
        }

        // Funci√≥n para iniciar la m√∫sica autom√°ticamente
        function startAutoplay() {
            playHappyBirthday();
        }

        function playHappyBirthday() {
            try {
                // Si ya existe y est√° pausado, simplemente reanudar
                if (birthdayAudio && !isPlaying) {
                    birthdayAudio.play();
                    isPlaying = true;
                    document.getElementById('musicStatus').textContent = 'üéµ Reproduciendo Cumplea√±os Feliz...';
                    return;
                }
                
                // Si no existe, crear nuevo audio
                if (!birthdayAudio) {
                    birthdayAudio = new Audio('cumpleanos-feliz.mp3');
                    
                    // Configurar el audio para que se repita
                    birthdayAudio.loop = true;
                    
                    // Manejar cuando termina la reproducci√≥n
                    birthdayAudio.addEventListener('ended', function() {
                        isPlaying = false;
                        document.getElementById('musicStatus').textContent = '‚èπÔ∏è M√∫sica terminada';
                    });
                    
                    // Manejar errores
                    birthdayAudio.addEventListener('error', function(e) {
                        console.error('Error con el audio:', e);
                        document.getElementById('musicStatus').textContent = '‚ùå Error reproduciendo m√∫sica';
                        fallbackCelebration();
                    });
                }
                
                // Reproducir la m√∫sica
                birthdayAudio.play().then(() => {
                    isPlaying = true;
                    document.getElementById('musicStatus').textContent = 'üéµ Reproduciendo Cumplea√±os Feliz...';
                }).catch(error => {
                    console.error('Error al reproducir:', error);
                    fallbackCelebration();
                });
                
            } catch (error) {
                console.error('Error general:', error);
                fallbackCelebration();
            }
        }

        function pauseMusic() {
            if (birthdayAudio && isPlaying) {
                birthdayAudio.pause();
                isPlaying = false;
                document.getElementById('musicStatus').textContent = '‚è∏Ô∏è M√∫sica en pausa';
            }
        }

        function stopMusic() {
            if (birthdayAudio) {
                birthdayAudio.pause();
                birthdayAudio.currentTime = 0;
                isPlaying = false;
                document.getElementById('musicStatus').textContent = '‚èπÔ∏è M√∫sica detenida';
            }
        }

        function fallbackCelebration() {
            // Si falla el audio, hacer celebraci√≥n alternativa
            document.getElementById('musicStatus').textContent = 'üé∂ ¬°Cumplea√±os Feliz! (modo silencioso)';
            alert('üé∂ ¬°Cumplea√±os Feliz!\n¬°Que los cumplas feliz!\n¬°Que los cumplas Claudia Malena!\n¬°Cumpleeeaaaaaaa√±ooossss Feeeelizzz! üéÇ');
        }

        // Part√≠culas especiales
        function createSpecialParticle() {
          const specialParticle = document.createElement('img');
          specialParticle.src = 'MaleParticle.png';
          specialParticle.className = 'special-particle';
          specialParticle.style.left = Math.random() * 100 + 'vw';
          specialParticle.style.width = '80px';
          specialParticle.style.height = '80px';
          specialParticle.style.objectFit = 'cover';
          specialParticle.style.animationDuration = (Math.random() * 4 + 3) + 's';
     
          document.body.appendChild(specialParticle);
    
         setTimeout(() => {
            specialParticle.remove();
          }, 7000);
        }

        // Confeti con part√≠culas especiales
        function createConfetti() {
            const colors = ['#ff7f50', '#ffd700', '#ff6b6b', '#4ecdc4', '#45b7d1'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    // Part√≠culas normales de colores (85%)
                    if (i < 85) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = Math.random() * 100 + 'vw';
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                        document.body.appendChild(confetti);
                        
                        setTimeout(() => {
                            confetti.remove();
                        }, 5000);
                    } 
                    // Part√≠culas especiales con foto (15%)
                    else {
                        createSpecialParticle();
                    }
                }, i * 30);
            }
        }

        function createHearts() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.innerHTML = '‚ù§Ô∏è';
                    heart.style.left = Math.random() * 100 + 'vw';
                    heart.style.top = Math.random() * 100 + 'vh';
                    heart.style.fontSize = (Math.random() * 25 + 15) + 'px';
                    document.body.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 4000);
                }, i * 200);
            }
        }

        function celebrate() {
            createConfetti();
            createHearts();
            
            // Si la m√∫sica no est√° sonando, iniciarla
            if (!isPlaying) {
                playHappyBirthday();
            }
        }

        // Event listeners para el lightbox
        document.addEventListener('keydown', function(event) {
            const lightbox = document.getElementById('lightbox');
            if (event.key === 'Escape' && lightbox.style.display === 'flex') {
                closeLightbox();
            }
        });

        document.getElementById('lightbox').addEventListener('click', function(event) {
            if (event.target === this) {
                closeLightbox();
            }
        });

        // Iniciar autom√°ticamente al cargar la p√°gina
        window.onload = function() {
            celebrate(); // Efectos visuales
            // Peque√±o retraso para que primero cargue la p√°gina
            setTimeout(startAutoplay, 1000);
        };
    </script>
</body>
</html>